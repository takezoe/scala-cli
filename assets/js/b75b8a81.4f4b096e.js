"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9149],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},385:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return d},default:function(){return u}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],c={title:"Under the hood",sidebar_position:32},s=void 0,l={unversionedId:"under-the-hood",id:"under-the-hood",isDocsHomePage:!1,title:"Under the hood",description:"This page is dedicated for people already familiar with Scala / JVM ecosystem.",source:"@site/docs/under-the-hood.md",sourceDirName:".",slug:"/under-the-hood",permalink:"/docs/under-the-hood",editUrl:"https://github.com/Virtuslab/scala-cli/edit/master/website/docs/under-the-hood.md",tags:[],version:"current",sidebarPosition:32,frontMatter:{title:"Under the hood",sidebar_position:32},sidebar:"tutorialSidebar",previous:{title:"Interaction with Bloop server",permalink:"/docs/reference/bloop"}},d=[{value:"Caching and incrementality",id:"caching-and-incrementality",children:[],level:3},{value:"Bloop and coursier",id:"bloop-and-coursier",children:[],level:3}],p={toc:d};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This page is dedicated for people already familiar with Scala / JVM ecosystem."),(0,o.kt)("p",{parentName:"div"},"If you just want to learn Scala CLI just head out to the ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3000/docs/commands/input"},"Commands section")))),(0,o.kt)("h1",{id:"under-the-hood"},"Under the hood"),(0,o.kt)("p",null,"Scala-cli consists in a native executable, generated by ",(0,o.kt)("a",{parentName:"p",href:"https://www.graalvm.org"},"GraalVM"),"\nnative image. It runs fine on Linux and macOS with no prior requirements, and\nonly requires the ",(0,o.kt)("a",{parentName:"p",href:"https://www.microsoft.com/en-us/download/details.aspx?id=48145"},"Visual C++ Redistributable Runtime"),"\non Windows. Native image allows Scala CLI to be responsive, as a proper command line application should be."),(0,o.kt)("h3",{id:"caching-and-incrementality"},"Caching and incrementality"),(0,o.kt)("p",null,"Since most of the tasks requires compilation or dependency resolution under the hood, Scala CLI heavily use caches and incrementality under the hood to provide output as quickly as possible. Incremental compilation or caching are not perfect. In some cases, we need to be 100% that our problems are caused by our code (or e.g. bug in compiler) not the stale state of our project. For that reason we have introduce ",(0,o.kt)("a",{parentName:"p",href:"/docs/commands/clean"},"clean")," command that invalidates local caches and forces next compilation to be complete (non-incremental.md)."),(0,o.kt)("p",null,"In cases something goes wrong within incremental compilation or caching or when one would be 100% sure that the problems are caused by code not under-compilation."),(0,o.kt)("p",null,"We provide more in-depth overview about our caching in the guide dedicated to ",(0,o.kt)("a",{parentName:"p",href:"/docs/guides/internals"},"Scala CLI internals"),"."),(0,o.kt)("h3",{id:"bloop-and-coursier"},"Bloop and coursier"),(0,o.kt)("p",null,"To ensure the quickest compilation, Scala CLI uses and manages ",(0,o.kt)("a",{parentName:"p",href:"https://scalacenter.github.io/bloop/"},"Bloop")," compilation server. We have a ",(0,o.kt)("a",{parentName:"p",href:"/docs/reference/bloop"},"detailed guide")," how Scala CLI interacts with local bloop server. It takes care of fetching and starting Bloop if needed, so that you don't have to worry\nabout it."),(0,o.kt)("p",null,"Scala CLI uses ",(0,o.kt)("a",{parentName:"p",href:"https://get-coursier.io/"},"coursier")," to manage dependencies. It automatically downloads and unpacks a JVM if none is installed on your system, so that all its commands work fine even if a JVM isn't already installed. Scala-cli shares coursier caches with other tools like ",(0,o.kt)("a",{parentName:"p",href:"https://www.scala-sbt.org/"},"sbt")," or ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/com-lihaoyi/mill"},"mill")," or ",(0,o.kt)("a",{parentName:"p",href:"https://scalameta.org/metals/"},"Metals"),"."))}u.isMDXComponent=!0}}]);